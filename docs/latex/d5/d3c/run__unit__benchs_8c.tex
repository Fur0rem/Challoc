\doxysection{benchmarks/run\+\_\+unit\+\_\+benchs.c File Reference}
\hypertarget{run__unit__benchs_8c}{}\label{run__unit__benchs_8c}\index{benchmarks/run\_unit\_benchs.c@{benchmarks/run\_unit\_benchs.c}}


Compare the performance of challoc and libc of standalone function calls.  


{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include $<$x86intrin.\+h$>$}\newline
{\ttfamily \#include "{}../src/challoc.\+h"{}}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structBenchResult}{Bench\+Result}}
\begin{DoxyCompactList}\small\item\em The result of a benchmark. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries BLUE}~"{}\textbackslash{}033\mbox{[}34m"{}
\item 
\#define {\bfseries RESET}~"{}\textbackslash{}033\mbox{[}0m"{}
\item 
\#define {\bfseries BOLD}~"{}\textbackslash{}033\mbox{[}1m"{}
\item 
\#define {\bfseries MAX\+\_\+\+SIZE}~30
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{group__Challoc__prog__benchmarks_gafec31286e9f74b9225e8905730bfb67d}{Allocator}} \{ \mbox{\hyperlink{group__Challoc__prog__benchmarks_ggafec31286e9f74b9225e8905730bfb67da8682073a81feafa5727d362f96656fc6}{LIBC}}
, \mbox{\hyperlink{group__Challoc__prog__benchmarks_ggafec31286e9f74b9225e8905730bfb67daf7c734583f24d8691c6807bd2f163e21}{CHALLOC}}
 \}
\begin{DoxyCompactList}\small\item\em Touch the memory to make sure it\textquotesingle{}s allocated. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void {\bfseries warmup\+\_\+clock} ()
\begin{DoxyCompactList}\small\item\em Warm up the clock by doing a lot of nops. \end{DoxyCompactList}\item 
uint64\+\_\+t \mbox{\hyperlink{group__Challoc__prog__benchmarks_ga140ff00997818659e12a386342ca5f82}{cpu\+\_\+frequency}} ()
\begin{DoxyCompactList}\small\item\em Approximate the CPU frequency by measuring the number of cycles in a second. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Challoc__prog__benchmarks_gaa840894e554c6de34f56ae8ccd49835d}{touch\+\_\+memory}} (volatile uint8\+\_\+t \texorpdfstring{$\ast$}{*}ptr, size\+\_\+t size\+\_\+requested)
\begin{DoxyCompactList}\small\item\em Touch the memory to make sure it\textquotesingle{}s allocated. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Challoc__prog__benchmarks_ga9dbb8185be5a4480fa46f8c236908d54}{bench\+\_\+malloc}} (\mbox{\hyperlink{structBenchResult}{Bench\+Result}} \texorpdfstring{$\ast$}{*}allocator\+\_\+result, void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*}alloc)(size\+\_\+t), void(\texorpdfstring{$\ast$}{*}dealloc)(void \texorpdfstring{$\ast$}{*}), char \texorpdfstring{$\ast$}{*}fn\+\_\+name)
\begin{DoxyCompactList}\small\item\em Benchmark the malloc function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Challoc__prog__benchmarks_ga887e6d8c6aa883a79e94014f7f190d15}{bench\+\_\+realloc}} (\mbox{\hyperlink{structBenchResult}{Bench\+Result}} \texorpdfstring{$\ast$}{*}allocator\+\_\+result, void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*}alloc)(size\+\_\+t), void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*}realloc)(void \texorpdfstring{$\ast$}{*}, size\+\_\+t), void(\texorpdfstring{$\ast$}{*}dealloc)(void \texorpdfstring{$\ast$}{*}), char \texorpdfstring{$\ast$}{*}fn\+\_\+name)
\begin{DoxyCompactList}\small\item\em Benchmark the realloc function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Challoc__prog__benchmarks_ga0cffb8302e3fc20dc9f11a2298831f3d}{bench\+\_\+calloc}} (\mbox{\hyperlink{structBenchResult}{Bench\+Result}} \texorpdfstring{$\ast$}{*}allocator\+\_\+result, void \texorpdfstring{$\ast$}{*}(\texorpdfstring{$\ast$}{*}calloc)(size\+\_\+t, size\+\_\+t), void(\texorpdfstring{$\ast$}{*}dealloc)(void \texorpdfstring{$\ast$}{*}), char \texorpdfstring{$\ast$}{*}fn\+\_\+name)
\begin{DoxyCompactList}\small\item\em Benchmark the calloc function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Challoc__prog__benchmarks_gaac150bd544dae3a8824dbbb744a2232e}{write\+\_\+results}} (\mbox{\hyperlink{structBenchResult}{Bench\+Result}} libc, \mbox{\hyperlink{structBenchResult}{Bench\+Result}} challoc, char \texorpdfstring{$\ast$}{*}output\+\_\+dir)
\begin{DoxyCompactList}\small\item\em Write the results of a benchmark to a file. \end{DoxyCompactList}\item 
int {\bfseries main} (int argc, char \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}argv)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint64\+\_\+t {\bfseries cpu\+\_\+freq} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Compare the performance of challoc and libc of standalone function calls. 

